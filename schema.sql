/*
DROP TABLE IF EXISTS SubjectKlassRel
DROP TABLE IF EXISTS SubjectTeacherRel
DROP TABLE IF EXISTS Subject
DROP TABLE IF EXISTS Class
DROP TABLE IF EXISTS Teacher
DROP TABLE IF EXISTS Grade
DROP TABLE IF EXISTS Student
DROP TABLE IF EXISTS Exam
DROP TABLE IF EXISTS MyCalendar
*/
CREATE TABLE Subject
(
    ID INTEGER IDENTITY(1, 1) PRIMARY KEY,
    Name nvarchar(40) NOT NULL,
)
CREATE TABLE MyCalendar
(
    ID INTEGER IDENTITY(1, 1) PRIMARY KEY,
    Date DATE NOT NULL,
    Year INTEGER NOT NULL,
)
CREATE TABLE Teacher
(
    ID INTEGER IDENTITY(1,1) NOT NULL PRIMARY KEY, 
    Name nvarchar(40) NOT NULL,
    PESEL nvarchar(11),
    Surname nvarchar(40) NOT NULL,
    Title nvarchar(40) NOT NULL,
    StartWorkingDate_ID INTEGER NOT NULL FOREIGN KEY REFERENCES MyCalendar,
    ExperienceYears INTEGER NOT NULL,
    Supervisor_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Teacher,
    Subject_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Subject,
)
CREATE TABLE Class
(
    ID INTEGER IDENTITY(1, 1) PRIMARY KEY,
    Sign nvarchar(1) NOT NULL,
    Tutor_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Teacher,
    OriginYear INTEGER NOT NULL,
)
CREATE TABLE Student
(
    ID INTEGER IDENTITY(1,1) NOT NULL PRIMARY KEY, 
    Name nvarchar(40) NOT NULL,
    PESEL nvarchar(11),
    Surname nvarchar(40) NOT NULL,
    Class_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Class,
    supervisor_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Student,
    gimScore INTEGER NOT NULL
)
CREATE TABLE Grade
(
    ID INTEGER IDENTITY(1, 1) PRIMARY KEY,
    Year INTEGER NOT NULL,
    Grade FLOAT NOT NULL,
    Subject_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Subject,
    Teacher_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Teacher,
    Student_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Student,
)
CREATE TABLE Exam
(
    ID INTEGER IDENTITY(1, 1) PRIMARY KEY,
    Result FLOAT NOT NULL,
    Date_ID INTEGER NOT NULL FOREIGN KEY REFERENCES MyCalendar,
    Student_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Student,
    Subject_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Subject,
    Teacher_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Teacher,
)
CREATE TABLE SubjectTeacherRel
(
    ID INTEGER IDENTITY(1, 1) PRIMARY KEY,
    Subject_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Subject,
    Teacher_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Teacher,
)
CREATE TABLE SubjectKlassRel
(
    ID INTEGER IDENTITY(1, 1) PRIMARY KEY,
    Subject_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Subject,
    Class_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Class,
    Teacher_ID INTEGER NOT NULL FOREIGN KEY REFERENCES Teacher,
)
